# Mosquitto SSL/TLS Configuration
# 基本设置
persistence true
persistence_location /tmp/mosquitto/
log_dest file /tmp/mosquitto.log
log_type all

# 非SSL监听器（用于本地测试）
listener 1883 127.0.0.1
allow_anonymous true

# SSL/TLS监听器
listener 8883 0.0.0.0
protocol mqtt

# SSL证书配置
cafile certs/ca.crt
certfile certs/server.crt
keyfile certs/server.key

# SSL设置
require_certificate false
use_identity_as_username false
tls_version tlsv1.2

# 允许匿名连接（用于测试）
allow_anonymous true

# 可选：启用WebSocket over SSL
# listener 9001
# protocol websockets
# cafile certs/ca.crt
# certfile certs/server.crt
# keyfile certs/server.key